<!DOCTYPE html>
<html>
<head>
    <title>БетонОнлайн</title>	
    <meta name="generator" content="">
	<meta name="keywords" content="">
	<meta name="description" content="">

    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

	<link rel="stylesheet" type="text/css" href="css/bootstrap.min_4.6.0.css">

    <script type="text/javascript" src="scripts/jquery.js"></script>
    <script type="text/javascript" src="scripts/jquery.ui.js"></script>
    <script type="text/javascript" src="scripts/popper.min.js"></script>
    <script type="text/javascript" src="scripts/bootstrap.min.js"></script> 

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">  
    
</head>
<body>   
    <nav class="navbar navbar-expand-md fixed-top bg-dark navbar-dark">
        <div class="container-xl">
            <a class="navbar-brand" href="#">
                <img src="./img/logo.png" alt="" width="30" height="30" class="d-inline-block align-text-top">
                БетонОнлайн
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample07XL" aria-controls="navbarsExample07XL" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarsExample07XL">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="./index.html">Калькулятор</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./contact.html">Контакты</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>  
    <main role="main" class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="card mb-4 shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">Калькулятор</h5>
						<form id="myForm">
							<div class="form-group">
								<label for="class">Класс бетона:</label>
								<input type="number" class="form-control"  id="class" name="class">
							</div>
							
							<div class="form-group">
								<label for="cement">Марка цемента:</label>
								<input type="number" class="form-control" id="cement" name="cement">
							</div>
							<div class="form-group">
								<label for="consistency">Значение удобоукладываемости:</label>
								<input type="number" class="form-control" id="consistency" name="consistency">
							</div>
							<div class="form-group">
								<label for="additive">Добавка:</label>
								<select id="additive" name="additive" class="form-control changeAction">
								  <option value="1">Нет</option>
								  <option value="2">Водоредуцирующая</option>
								  <option value="3">Суперводоредуцирующая</option>
								</select>
							</div>
							<div class="form-group">
								<label for="cementAmount">Расход цемента:</label>
								<input type="number" class="form-control" id="cementAmount" name="cementAmount">
							</div>
							<div class="form-group">
								<label for="grainSize">Крупность щебня:</label>
								<select id="grainSize" name="grainSize" class="form-control changeAction">
									<option value="10">10</option>
									<option value="20">20</option>
									<option value="40">40</option>
								</select>
							</div>
							<button class="btn btn-success" type="button" onclick="calculate()">Рассчитать</button>
						</form>
                    </div>
                </div>
				<p id="result"></p>
            </div>
        </div>
    </main>
	<script>
	function calculate() {
		var form = document.getElementById("myForm");
		var Rb1 = parseFloat(form.elements["class"].value);
		var Rb2 = Rb1 * 0.7;
		var Rc = parseFloat(form.elements["cement"].value);
		var CB = (Rb2 - 0.06 * Rc + 13) / (0.24 * Rc + 13);

		var I = parseInt(form.elements["consistency"].value);
		var dobav = parseInt(form.elements["additive"].value);
		var B = 0;
		if (dobav === 1) {
			B = [135, 145, 155, 170, 185, 205, 215, 230, 240][I - 1];
		}
		if (dobav === 2) {
			B = [0, 0, 145, 160, 165, 185, 200, 210, 215][I - 1];
		}
		if (dobav === 3) {
			B = [0, 0, 130, 145, 150, 165, 170, 185, 190][I - 1];
		}	

		var C = CB * B;
		var Vz = ((1000 - (B / 1)) - (C / 2.9));
		
		r10 = [0.54, 0.51, 0.48, 0.45];
		r20 = [0.51, 0.48, 0.45, 0.42];
		r40 = [0.48, 0.45, 0.42, 0.39];

		var R = parseInt(form.elements["cementAmount"].value);
		var krpn = parseInt(form.elements["grainSize"].value);
		var r = 0;
		if (R === 200 && krpn === 10) {
			r = r10[0];
		} else if (R === 200 && krpn === 20) {
			r = r20[0];
		} else if (R === 200 && krpn === 40) {
			r = r40[0];
		} else if (R === 300 && krpn === 10) {
			r = r10[1];
		} else if (R === 300 && krpn === 20) {
			r = r20[1];
		} else if (R === 300 && krpn === 40) {
			r = r40[1];
		} else if (R === 400 && krpn === 10) {
			r = r10[2];
		} else if (R === 400 && krpn === 20) {
			r = r20[2];
		} else if (R === 400 && krpn === 40) {
			r = r40[2];
		} else if (R === 500 && krpn === 10) {
			r = r10[3];
		} else if (R === 500 && krpn === 20) {
			r = r20[3];
		} else if (R === 500 && krpn === 40) {
			r = r40[3];
		}

		var P = Vz * r * 1;
		var rosch = 1400;
		var Sch = Vz * (1 - r) * rosch;
	 
		// Проверка наличия значений
		if (
			isNaN(Rb1) || 
			isNaN(Rc) || 
			isNaN(I) || 
			isNaN(dobav) || 
			isNaN(krpn) || 
			isNaN(R)
		) {			
			var result = 
			"<div class='card mb-4 shadow-sm'>" + 
				"<div class='card-body'>" + 
					"<h5 class='card-title'>Результат</h5>" + 
					"<p class='card-text'>" + 
						"Недостаточно данных для расчета! " + 
					"</p>"+
				"</div>" +
			"</div>";

			document.getElementById("result").innerHTML = result;
			return;
        }

		var result = 
		"<div class='card mb-4 shadow-sm'>" + 
			"<div class='card-body'>" + 
				"<h5 class='card-title'>Результат</h5>" + 
				"<p class='card-text'>" + 
					"C / B: " + CB.toFixed(3) + "<br>" +
					"Расход воды: " + B + "<br>" +
					"Расход цемента: " + C.toFixed(3) + "<br>" +
					"Vz: " + Vz.toFixed(3) + "<br>" +
					"Количество мелкого заполнителя: " + P.toFixed(3) + "<br>" +
					"Количество крупного заполнителя: " + Sch.toFixed(3) +
				"</p>"+
			"</div>" +
		"</div>";

      document.getElementById("result").innerHTML = result;
    }
  </script>
</body>
<footer>
    <div class="container"> <p class="float-right"> 
		<a href="#">Наверх </a>
		</p>
			<p>© 2024 БетонОнлайн</p>
		</div>
</footer> 
</html>